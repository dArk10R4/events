{% extends 'base.html' %}

{% block content %}

<style scoped>
    .slider {
        position: relative;
        max-width: 100%;
        margin: auto;
        overflow: hidden;
    }
    .slides {
        display: flex;
        transition: transform 0.5s ease-in-out;
    }
    .slide {
        min-width: 100%;
        box-sizing: border-box;
    }
    .slide img {
        max-width: 500px;
        width: 100%;
        height: auto;
    }
</style>

<div class="slider">
    <div class="slides">
        {% for event in local_events %}
        <div class="slide">
            <h2>{{ event.title }}</h2>
            <p>{{ event.author }}</p>
            <p>{{ event.start.strftime('%Y-%m-%d %H:%M:%S') }} - {{ event.end.strftime('%Y-%m-%d %H:%M:%S') }}</p>
            <p>{{ event.location }}</p>
            {% if event.image_path %}
            <img src="{{ url_for('static', filename='event_images/' ~ event.image_path) }}" alt="{{ event.title }}">
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
<script>
    let currentIndex = 0;
    const slides = document.querySelector('.slides');
    const slideCount = document.querySelectorAll('.slide').length;
    
    function showNextSlide() {
        currentIndex = (currentIndex + 1) % slideCount;
        const offset = -currentIndex * 100;
        slides.style.transform = `translateX(${offset}%)`;
    }
    
    setInterval(showNextSlide, 10000); // Change slide every 10 seconds
</script>

<h1>Upcoming Events</h1>

{% if events %}
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Start</th>
                <th>End</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            {% for event in events %}
            <tr>
                <td>{{ event.title }}</td>
                <td>{{ event.author }}</td>
                <td>{{ event.start }}</td>
                <td>{{ event.end }}</td>
                <td>{{ event.location }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No events available at the moment.</p>
{% endif %}

{% endblock %}
